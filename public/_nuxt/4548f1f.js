/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{609:function(t,e,n){"use strict";(function(t){var r=n(645),o=n(646),h=n(647);function f(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(f()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return v(this,t)}return d(this,t,e,n)}function d(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=m(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|T(e,n),o=(t=c(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|w(e.length);return 0===(t=c(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?c(t,0):m(t,e);if("Buffer"===e.type&&h(e.data))return m(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function y(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function v(t,e){if(y(e),t=c(t,e<0?0:0|w(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function m(t,e){var n=e.length<0?0:0|w(e.length);t=c(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function w(t){if(t>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|t}function T(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(t).length;default:if(r)return $(t).length;e=(""+e).toLowerCase(),r=!0}}function k(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return U(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function E(b,t,e){var i=b[t];b[t]=b[e],b[e]=i}function S(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:A(t,e,n,r,o);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):A(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function A(t,e,n,r,o){var i,h=1,f=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;h=2,f/=2,c/=2,n/=2}function l(t,i){return 1===h?t[i]:t.readUInt16BE(i*h)}if(o){var d=-1;for(i=n;i<f;i++)if(l(t,i)===l(e,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===c)return d*h}else-1!==d&&(i-=i-d),d=-1}else for(n+c>f&&(n=f-c),i=n;i>=0;i--){for(var y=!0,v=0;v<c;v++)if(l(t,i+v)!==l(e,v)){y=!1;break}if(y)return i}return-1}function _(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var h=e.length;if(h%2!=0)throw new TypeError("Invalid hex string");r>h/2&&(r=h/2);for(var i=0;i<r;++i){var f=parseInt(e.substr(2*i,2),16);if(isNaN(f))return i;t[n+i]=f}return i}function P(t,e,n,r){return X($(e,t.length-n),t,n,r)}function I(t,e,n,r){return X(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,n,r)}function R(t,e,n,r){return I(t,e,n,r)}function x(t,e,n,r){return X(J(e),t,n,r)}function B(t,e,n,r){return X(function(t,e){for(var n,r,o,h=[],i=0;i<t.length&&!((e-=2)<0);++i)n=t.charCodeAt(i),r=n>>8,o=n%256,h.push(o),h.push(r);return h}(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,h,f,c,l=t[i],d=null,y=l>239?4:l>223?3:l>191?2:1;if(i+y<=n)switch(y){case 1:l<128&&(d=l);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)>127&&(d=c);break;case 3:o=t[i+1],h=t[i+2],128==(192&o)&&128==(192&h)&&(c=(15&l)<<12|(63&o)<<6|63&h)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:o=t[i+1],h=t[i+2],f=t[i+3],128==(192&o)&&128==(192&h)&&128==(192&f)&&(c=(15&l)<<18|(63&o)<<12|(63&h)<<6|63&f)>65535&&c<1114112&&(d=c)}null===d?(d=65533,y=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=y}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=f(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return d(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return y(e),e<=0?c(t,e):void 0!==n?"string"==typeof r?c(t,e).fill(n,r):c(t,e).fill(n):c(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return v(null,t)},l.allocUnsafeSlow=function(t){return v(null,t)},l.isBuffer=function(b){return!(null==b||!b._isBuffer)},l.compare=function(a,b){if(!l.isBuffer(a)||!l.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var t=a.length,e=b.length,i=0,n=Math.min(t,e);i<n;++i)if(a[i]!==b[i]){t=a[i],e=b[i];break}return t<e?-1:e<t?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!h(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},l.byteLength=T,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)E(this,i,i+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)E(this,i,i+3),E(this,i+1,i+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)E(this,i,i+7),E(this,i+1,i+6),E(this,i+2,i+5),E(this,i+3,i+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):k.apply(this,arguments)},l.prototype.equals=function(b){if(!l.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===l.compare(this,b)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var h=(o>>>=0)-(r>>>=0),f=(n>>>=0)-(e>>>=0),c=Math.min(h,f),d=this.slice(r,o),y=t.slice(e,n),i=0;i<c;++i)if(d[i]!==y[i]){h=d[i],f=y[i];break}return h<f?-1:f<h?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return S(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return S(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var h=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return P(this,t,e,n);case"ascii":return I(this,t,e,n);case"latin1":case"binary":return R(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,e,n);default:if(h)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function L(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=K(t[i]);return o}function D(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function N(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Y(t,e,n,r,o,h){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<h)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function F(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function V(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function j(t,e,n,r,o,h){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(t,e,n,r,h){return h||j(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function G(t,e,n,r,h){return h||j(t,0,n,8),o.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var o=e-t;n=new l(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},l.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Y(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Y(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):V(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);Y(this,t,e,n,o-1,-o)}var i=0,h=1,sub=0;for(this[e]=255&t;++i<n&&(h*=256);)t<0&&0===sub&&0!==this[e+i-1]&&(sub=1),this[e+i]=(t/h>>0)-sub&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);Y(this,t,e,n,o-1,-o)}var i=n-1,h=1,sub=0;for(this[e+i]=255&t;--i>=0&&(h*=256);)t<0&&0===sub&&0!==this[e+i+1]&&(sub=1),this[e+i]=(t/h>>0)-sub&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):V(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Y(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return H(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return H(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return G(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return G(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var code=t.charCodeAt(0);code<256&&(t=code)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var o=l.isBuffer(t)?t:$(new l(t,r).toString()),h=o.length;for(i=0;i<n-e;++i)this[i+e]=o[i%h]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function K(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,e){var n;e=e||1/0;for(var r=t.length,o=null,h=[],i=0;i<r;++i){if((n=t.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&h.push(239,191,189);continue}if(i+1===r){(e-=3)>-1&&h.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&h.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&h.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;h.push(n)}else if(n<2048){if((e-=2)<0)break;h.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;h.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;h.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return h}function J(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(27))},645:function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,i,n=c(t),r=n[0],f=n[1],l=new h(function(t,e,n){return 3*(e+n)/4-n}(0,r,f)),d=0,y=f>0?r-4:r;for(i=0;i<y;i+=4)e=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],l[d++]=e>>16&255,l[d++]=e>>8&255,l[d++]=255&e;2===f&&(e=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,l[d++]=255&e);1===f&&(e=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,l[d++]=e>>8&255,l[d++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,h=[],i=0,f=n-o;i<f;i+=16383)h.push(l(t,i,i+16383>f?f:i+16383));1===o?(e=t[n-1],h.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],h.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return h.join("")};for(var r=[],o=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,f=code.length;i<f;++i)r[i]=code[i],o[code.charCodeAt(i)]=i;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var o,h,output=[],i=e;i<n;i+=3)o=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),output.push(r[(h=o)>>18&63]+r[h>>12&63]+r[h>>6&63]+r[63&h]);return output.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},646:function(t,e){e.read=function(t,e,n,r,o){var h,f,c=8*o-r-1,l=(1<<c)-1,d=l>>1,y=-7,i=n?o-1:0,v=n?-1:1,s=t[e+i];for(i+=v,h=s&(1<<-y)-1,s>>=-y,y+=c;y>0;h=256*h+t[e+i],i+=v,y-=8);for(f=h&(1<<-y)-1,h>>=-y,y+=r;y>0;f=256*f+t[e+i],i+=v,y-=8);if(0===h)h=1-d;else{if(h===l)return f?NaN:1/0*(s?-1:1);f+=Math.pow(2,r),h-=d}return(s?-1:1)*f*Math.pow(2,h-r)},e.write=function(t,e,n,r,o,h){var f,c,l,d=8*h-o-1,y=(1<<d)-1,v=y>>1,rt=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,i=r?0:h-1,m=r?1:-1,s=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,f=y):(f=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-f))<1&&(f--,l*=2),(e+=f+v>=1?rt/l:rt*Math.pow(2,1-v))*l>=2&&(f++,l/=2),f+v>=y?(c=0,f=y):f+v>=1?(c=(e*l-1)*Math.pow(2,o),f+=v):(c=e*Math.pow(2,v-1)*Math.pow(2,o),f=0));o>=8;t[n+i]=255&c,i+=m,c/=256,o-=8);for(f=f<<o|c,d+=o;d>0;t[n+i]=255&f,i+=m,f/=256,d-=8);t[n+i-m]|=128*s}},647:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},648:function(t,e,n){"use strict";(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}for(var f={VERSION:"2.0.14",NOTES:[],HEADER_CHUNK_LENGTH:14,CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},c=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],l=0,d=function(i){c.forEach((function(t){t.forEach((function(t){return f.NOTES[l]=t+i})),l++}))},i=-1;i<=9;i++)d(i);var y=function(){function e(){r(this,e)}return h(e,null,[{key:"byteToHex",value:function(t){return("0"+t.toString(16)).slice(-2)}},{key:"bytesToHex",value:function(t){var n=[];return t.forEach((function(t){return n.push(e.byteToHex(t))})),n.join("")}},{key:"hexToNumber",value:function(t){return parseInt(t,16)}},{key:"bytesToNumber",value:function(t){return e.hexToNumber(e.bytesToHex(t))}},{key:"bytesToLetters",value:function(t){var e=[];return t.forEach((function(t){return e.push(String.fromCharCode(t))})),e.join("")}},{key:"decToBinary",value:function(t){return(t>>>0).toString(2)}},{key:"getVarIntLength",value:function(t){for(var e=t[0],n=1;e>=128;)e=t[n],n++;return n}},{key:"readVarInt",value:function(t){var e=0;return t.forEach((function(t){128&t?(e+=127&t,e<<=7):e+=t})),e}},{key:"atob",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return"function"==typeof atob?atob(e):new t(e,"base64").toString("binary")}))}]),e}(),v=function(){function t(e,data){r(this,t),this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=e,this.data=data,this.delta=0,this.runningDelta=0,this.events=[];var n=this.data.subarray(this.data.length-3,this.data.length);if(255!==n[0]||47!==n[1]||0!==n[2])throw"Invalid MIDI file; Last three bytes of track "+this.index+"must be FF 2F 00 to mark end of track"}return h(t,[{key:"reset",value:function(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"setEventIndexByTick",value:function(t){for(var i in t=t||0,this.events)if(this.events[i].tick>=t)return this.eventIndex=i,this}},{key:"getCurrentByte",value:function(){return this.data[this.pointer]}},{key:"getDeltaByteCount",value:function(){return y.getVarIntLength(this.data.subarray(this.pointer))}},{key:"getDelta",value:function(){return y.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}},{key:"handleEvent",value:function(t,e){if(e=e||!1){var n=t-this.lastTick>=this.getDelta();if(this.pointer<this.data.length&&(e||n)){var r=this.parseEvent();if(this.enabled)return r}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=t&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}},{key:"getStringData",value:function(t){var e=y.getVarIntLength(this.data.subarray(t+2)),n=y.readVarInt(this.data.subarray(t+2,t+2+e));return y.bytesToLetters(this.data.subarray(t+2+e,t+2+e+n))}},{key:"parseEvent",value:function(){var t=this.pointer+this.getDeltaByteCount(),e={},n=this.getDeltaByteCount();if(e.track=this.index+1,e.delta=this.getDelta(),this.lastTick=this.lastTick+e.delta,this.runningDelta+=e.delta,e.tick=this.runningDelta,e.byteIndex=this.pointer,255==this.data[t]){switch(this.data[t+1]){case 0:e.name="Sequence Number";break;case 1:e.name="Text Event",e.string=this.getStringData(t);break;case 2:e.name="Copyright Notice";break;case 3:e.name="Sequence/Track Name",e.string=this.getStringData(t);break;case 4:e.name="Instrument Name",e.string=this.getStringData(t);break;case 5:e.name="Lyric",e.string=this.getStringData(t);break;case 6:e.name="Marker";break;case 7:e.name="Cue Point",e.string=this.getStringData(t);break;case 9:e.name="Device Name",e.string=this.getStringData(t);break;case 32:e.name="MIDI Channel Prefix";break;case 33:e.name="MIDI Port",e.data=y.bytesToNumber([this.data[t+3]]);break;case 47:e.name="End of Track";break;case 81:e.name="Set Tempo",e.data=Math.round(6e7/y.bytesToNumber(this.data.subarray(t+3,t+6))),this.tempo=e.data;break;case 84:e.name="SMTPE Offset";break;case 88:e.name="Time Signature",e.data=this.data.subarray(t+3,t+7),e.timeSignature=e.data[0]+"/"+Math.pow(2,e.data[1]);break;case 89:e.name="Key Signature",e.data=this.data.subarray(t+3,t+5),e.data[0]>=0?e.keySignature=f.CIRCLE_OF_FIFTHS[e.data[0]]:e.data[0]<0&&(e.keySignature=f.CIRCLE_OF_FOURTHS[Math.abs(e.data[0])]),0==e.data[1]?e.keySignature+=" Major":1==e.data[1]&&(e.keySignature+=" Minor");break;case 127:e.name="Sequencer-Specific Meta-event";break;default:e.name="Unknown: "+this.data[t+1].toString(16)}var r=y.getVarIntLength(this.data.subarray(t+2)),o=y.readVarInt(this.data.subarray(t+2,t+2+r));this.pointer+=n+3+o}else if(240===this.data[t]){e.name="Sysex";var h=y.getVarIntLength(this.data.subarray(t+1)),c=y.readVarInt(this.data.subarray(t+1,t+1+h));e.data=this.data.subarray(t+1+h,t+1+h+c),this.pointer+=n+1+h+c}else if(247===this.data[t]){e.name="Sysex (escape)";var l=y.getVarIntLength(this.data.subarray(t+1)),d=y.readVarInt(this.data.subarray(t+1,t+1+l));e.data=this.data.subarray(t+1+l,t+1+l+d),this.pointer+=n+1+l+d}else if(this.data[t]<128)if(e.running=!0,e.noteNumber=this.data[t],e.noteName=f.NOTES[this.data[t]],e.velocity=this.data[t+1],this.lastStatus<=143)e.name="Note off",e.channel=this.lastStatus-128+1,this.pointer+=n+2;else if(this.lastStatus<=159)e.name="Note on",e.channel=this.lastStatus-144+1,this.pointer+=n+2;else if(this.lastStatus<=175)e.name="Polyphonic Key Pressure",e.channel=this.lastStatus-160+1,e.note=f.NOTES[this.data[t+1]],e.pressure=event[1],this.pointer+=n+2;else if(this.lastStatus<=191)e.name="Controller Change",e.channel=this.lastStatus-176+1,e.number=this.data[t+1],e.value=this.data[t+2],this.pointer+=n+2;else if(this.lastStatus<=207)e.name="Program Change",e.channel=this.lastStatus-192+1,e.value=this.data[t+1],this.pointer+=n+1;else if(this.lastStatus<=223)e.name="Channel Key Pressure",e.channel=this.lastStatus-208+1,this.pointer+=n+1;else{if(!(this.lastStatus<=239))throw"Unknown event (running): ".concat(this.lastStatus);e.name="Pitch Bend",e.channel=this.lastStatus-224+1,this.pointer+=n+2}else if(this.lastStatus=this.data[t],this.data[t]<=143)e.name="Note off",e.channel=this.lastStatus-128+1,e.noteNumber=this.data[t+1],e.noteName=f.NOTES[this.data[t+1]],e.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=n+3;else if(this.data[t]<=159)e.name="Note on",e.channel=this.lastStatus-144+1,e.noteNumber=this.data[t+1],e.noteName=f.NOTES[this.data[t+1]],e.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=n+3;else if(this.data[t]<=175)e.name="Polyphonic Key Pressure",e.channel=this.lastStatus-160+1,e.note=f.NOTES[this.data[t+1]],e.pressure=event[2],this.pointer+=n+3;else if(this.data[t]<=191)e.name="Controller Change",e.channel=this.lastStatus-176+1,e.number=this.data[t+1],e.value=this.data[t+2],this.pointer+=n+3;else if(this.data[t]<=207)e.name="Program Change",e.channel=this.lastStatus-192+1,e.value=this.data[t+1],this.pointer+=n+2;else if(this.data[t]<=223)e.name="Channel Key Pressure",e.channel=this.lastStatus-208+1,this.pointer+=n+2;else{if(!(this.data[t]<=239))throw"Unknown event: ".concat(this.data[t]);e.name="Pitch Bend",e.channel=this.lastStatus-224+1,this.pointer+=n+3}return this.delta+=e.delta,this.events.push(e),e}},{key:"endOfTrack",value:function(){return 255==this.data[this.pointer+1]&&47==this.data[this.pointer+2]&&0==this.data[this.pointer+3]}}]),t}();Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});var m={Player:function(){function t(e,n){r(this,t),this.sampleRate=5,this.startTime=0,this.buffer=n||null,this.midiChunksByteLength=null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},"function"==typeof e&&this.on("midiEvent",e)}return h(t,[{key:"loadFile",value:function(path){throw"loadFile is only supported on Node.js"}},{key:"loadArrayBuffer",value:function(t){return this.buffer=new Uint8Array(t),this.fileLoaded()}},{key:"loadDataUri",value:function(t){for(var e=y.atob(t.split(",")[1]),n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return this.buffer=n,this.fileLoaded()}},{key:"getFilesize",value:function(){return this.buffer?this.buffer.length:0}},{key:"fileLoaded",value:function(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}},{key:"validate",value:function(){return"MThd"===y.bytesToLetters(this.buffer.subarray(0,4))}},{key:"getFormat",value:function(){return this.format=y.bytesToNumber(this.buffer.subarray(8,10)),this}},{key:"getTracks",value:function(){this.tracks=[];for(var t=0;t<this.buffer.length;){if("MTrk"==y.bytesToLetters(this.buffer.subarray(t,t+4))){var e=y.bytesToNumber(this.buffer.subarray(t+4,t+8));this.tracks.push(new v(this.tracks.length,this.buffer.subarray(t+8,t+8+e)))}t+=y.bytesToNumber(this.buffer.subarray(t+4,t+8))+8}var n=0;return this.tracks.forEach((function(track){n+=8+track.data.length})),this.midiChunksByteLength=f.HEADER_CHUNK_LENGTH+n,this}},{key:"enableTrack",value:function(t){return this.tracks[t-1].enable(),this}},{key:"disableTrack",value:function(t){return this.tracks[t-1].disable(),this}},{key:"getDivision",value:function(){return this.division=y.bytesToNumber(this.buffer.subarray(12,f.HEADER_CHUNK_LENGTH)),this}},{key:"playLoop",value:function(t){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach((function(track,e){if(!t&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{var n=track.handleEvent(this.tick,t);t&&n?(n.hasOwnProperty("name")&&"Set Tempo"===n.name&&(this.defaultTempo=n.data,this.setTempo(n.data)),n.hasOwnProperty("name")&&"Program Change"===n.name&&(this.instruments.includes(n.value)||this.instruments.push(n.value))):n&&(n.hasOwnProperty("name")&&"Set Tempo"===n.name&&(this.setTempo(n.data),this.isPlaying()&&this.pause().play()),this.emitEvent(n))}}),this),t||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setStartTime",value:function(t){return this.startTime=t,this}},{key:"play",value:function(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=(new Date).getTime()),this.setIntervalId=setInterval(this.playLoop.bind(this),this.sampleRate),this}},{key:"loop",value:function(){setTimeout(function(){this.playLoop(),this.loop()}.bind(this),this.sampleRate)}},{key:"pause",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}},{key:"stop",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}},{key:"skipToTick",value:function(t){return this.stop(),this.startTick=t,this.tracks.forEach((function(track){track.setEventIndexByTick(t)})),this}},{key:"skipToPercent",value:function(t){if(t<0||t>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(t/100*this.totalTicks)),this}},{key:"skipToSeconds",value:function(t){var e=this.getSongTime();if(t<0||t>e)throw t+" seconds not within song time of "+e;return this.skipToPercent(t/e*100),this}},{key:"isPlaying",value:function(){return this.setIntervalId>0||"object"===n(this.setIntervalId)}},{key:"dryRun",value:function(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}},{key:"resetTracks",value:function(){return this.tracks.forEach((function(track){return track.reset()})),this}},{key:"getEvents",value:function(){return this.tracks.map((function(track){return track.events}))}},{key:"getTotalTicks",value:function(){return Math.max.apply(null,this.tracks.map((function(track){return track.delta})))}},{key:"getTotalEvents",value:function(){return this.tracks.reduce((function(a,b){return{events:{length:a.events.length+b.events.length}}}),{events:{length:0}}).events.length}},{key:"getSongTime",value:function(){return this.totalTicks/this.division/this.tempo*60}},{key:"getSongTimeRemaining",value:function(){return Math.round((this.totalTicks-this.getCurrentTick())/this.division/this.tempo*60)}},{key:"getSongPercentRemaining",value:function(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}},{key:"bytesProcessed",value:function(){return f.HEADER_CHUNK_LENGTH+8*this.tracks.length+this.tracks.reduce((function(a,b){return{pointer:a.pointer+b.pointer}}),{pointer:0}).pointer}},{key:"eventsPlayed",value:function(){return this.tracks.reduce((function(a,b){return{eventIndex:a.eventIndex+b.eventIndex}}),{eventIndex:0}).eventIndex}},{key:"endOfFile",value:function(){return this.isPlaying()?this.totalTicks-this.tick<=0:this.bytesProcessed()>=this.midiChunksByteLength}},{key:"getCurrentTick",value:function(){return!this.startTime&&this.tick?this.startTick:this.startTime?Math.round(((new Date).getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick:0}},{key:"emitEvent",value:function(t){return this.triggerPlayerEvent("midiEvent",t),this}},{key:"on",value:function(t,e){return this.eventListeners.hasOwnProperty(t)||(this.eventListeners[t]=[]),this.eventListeners[t].push(e),this}},{key:"triggerPlayerEvent",value:function(t,data){return this.eventListeners.hasOwnProperty(t)&&this.eventListeners[t].forEach((function(t){return t(data||{})})),this}}]),t}(),Utils:y,Constants:f};e.a=m}).call(this,n(609).Buffer)},649:function(t,e,n){"use strict";var r=n(650),o=n(653);function h(t){return/\.js(\?.*)?$/i.test(t)}function f(t,e,n){return"https://gleitz.github.io/midi-js-soundfonts/"+(e="FluidR3_GM"===e?e:"MusyngKite")+"/"+t+"-"+(n="ogg"===n?n:"mp3")+".js"}var c=n(662);c.instrument=function t(e,n,c){if(1===arguments.length)return function(n,r){return t(e,n,r)};var l=c||{},d=l.isSoundfontURL||h,y=l.nameToUrl||f,v=d(n)?n:y(n,l.soundfont,l.format);return r(e,v,{only:l.only||l.notes}).then((function(t){var p=o(e,t,l).connect(l.destination?l.destination:e.destination);return p.url=v,p.name=n,p}))},c.nameToUrl=f,t.exports&&(t.exports=c),"undefined"!=typeof window&&(window.Soundfont=c)},650:function(t,e,n){"use strict";var r=n(651),o=n(652);function h(t){return function(e){return"string"==typeof e&&t.test(e)}}function f(pre,t){return"string"==typeof pre?pre+t:"function"==typeof pre?pre(t):t}function c(t,source,e,n){var r=source instanceof ArrayBuffer?l:d(source)?y:function(t){return t&&"function"==typeof t.then}(source)?v:m(source)?w:function(t){return t&&"object"==typeof t}(source)?T:k(source)?E:S(source)?A:_(source)?P:null;return r?r(t,source,e||{}):n?Promise.resolve(n):Promise.reject("Source not valid ("+source+")")}function l(t,e,n){return new Promise((function(n,r){t.decodeAudioData(e,(function(t){n(t)}),(function(){r("Can't decode audio data ("+e.slice(0,30)+"...)")}))}))}c.fetch=o;var d=h(/\.(mp3|wav|ogg)(\?.*)?$/i);function y(t,e,n){var r=f(n.from,e);return c(t,c.fetch(r,"arraybuffer"),n)}function v(t,e,n){return e.then((function(e){return c(t,e,n)}))}var m=Array.isArray;function w(t,e,n){return Promise.all(e.map((function(data){return c(t,data,n,data)})))}function T(t,e,n){var r={},o=Object.keys(e).map((function(o){if(n.only&&-1===n.only.indexOf(o))return null;var h=e[o];return c(t,h,n,h).then((function(audio){r[o]=audio}))}));return Promise.all(o).then((function(){return r}))}var k=h(/\.json(\?.*)?$/i);function E(t,e,n){var r=f(n.from,e);return c(t,c.fetch(r,"text").then(JSON.parse),n)}var S=h(/^data:audio/);function A(t,source,e){var i=source.indexOf(",");return c(t,r.decode(source.slice(i+1)).buffer,e)}var _=h(/\.js(\?.*)?$/i);function P(t,e,n){var r=f(n.from,e);return c(t,c.fetch(r,"text").then(I),n)}function I(data){var t=data.indexOf("MIDI.Soundfont.");if(t<0)throw Error("Invalid MIDI.js Soundfont format");t=data.indexOf("=",t)+2;var e=data.lastIndexOf(",");return JSON.parse(data.slice(t,e)+"}")}t.exports&&(t.exports=c),"undefined"!=typeof window&&(window.loadAudio=c)},651:function(t,e,n){"use strict";t.exports={decode:function(t,e){for(var n,r,o,h=t.replace(/[^A-Za-z0-9\+\/]/g,""),f=h.length,c=e?Math.ceil((3*f+1>>2)/e)*e:3*f+1>>2,l=new Uint8Array(c),d=0,y=0,v=0;v<f;v++)if(r=3&v,d|=((o=h.charCodeAt(v))>64&&o<91?o-65:o>96&&o<123?o-71:o>47&&o<58?o+4:43===o?62:47===o?63:0)<<18-6*r,3===r||f-v==1){for(n=0;n<3&&y<c;n++,y++)l[y]=d>>>(16>>>n&24)&255;d=0}return l}}},652:function(t,e,n){"use strict";t.exports=function(t,e){return new Promise((function(n,r){var o=new XMLHttpRequest;e&&(o.responseType=e),o.open("GET",t),o.onload=function(){200===o.status?n(o.response):r(Error(o.statusText))},o.onerror=function(){r(Error("Network Error"))},o.send()}))}},653:function(t,e,n){"use strict";var r=n(654),o=n(656),h=n(657),f=n(659),c=n(660);function l(t,source,e){return c(f(h(o(r(t,source,e)))))}t.exports&&(t.exports=l),"undefined"!=typeof window&&(window.SamplePlayer=l)},654:function(t,e,n){"use strict";var r=n(655),o={},h={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function f(t){return"number"==typeof t}var c=["attack","decay","sustain","release"];t.exports=function(t,source,e){var n=!1,l=0,d={},y=t.createGain();y.gain.value=1;var v=Object.assign({},h,e),m={context:t,out:y,opts:v};return source instanceof AudioBuffer?m.buffer=source:m.buffers=source,m.start=function(e,r,h){if(m.buffer&&null!==e)return m.start(null,e,r);var f=e?m.buffers[e]:m.buffer;if(f){if(n){var c=h||o;r=Math.max(t.currentTime,r||0),m.emit("start",r,e,c);var y=w(e,f,c);return y.id=function(e,n){return n.id=l++,d[n.id]=n,n.source.onended=function(){var e=t.currentTime;n.source.disconnect(),n.env.disconnect(),n.disconnect(),m.emit("ended",e,n.id,n)},n.id}(0,y),y.env.start(r),y.source.start(r),m.emit("started",r,y.id,y),c.duration&&y.stop(r+c.duration),y}console.warn("SamplePlayer not connected to any node.")}else console.warn("Buffer "+e+" not found.")},m.play=function(t,e,n){return m.start(t,e,n)},m.stop=function(t,e){var n;return(e=e||Object.keys(d)).map((function(e){return(n=d[e])?(n.stop(t),n.id):null}))},m.connect=function(t){return n=!0,y.connect(t),m},m.emit=function(t,e,n,r){m.onevent&&m.onevent(t,e,n,r);var o=m["on"+t];o&&o(e,n,r)},m;function w(e,n,o){var h,l=t.createGain();return l.gain.value=0,l.connect(y),l.env=function(t,e,n){var o=r(t),h=e.adsr||n.adsr;return c.forEach((function(t,i){o[t]=h?h[i]:e[t]||n[t]})),o.value.value=f(e.gain)?e.gain:f(n.gain)?n.gain:1,o}(t,o,v),l.env.connect(l.gain),l.source=t.createBufferSource(),l.source.buffer=n,l.source.connect(l),l.source.loop=o.loop||v.loop,l.source.playbackRate.value=(h=o.cents||v.cents)?Math.pow(2,h/1200):1,l.source.loopStart=o.loopStart||v.loopStart,l.source.loopEnd=o.loopEnd||v.loopEnd,l.stop=function(n){var time=n||t.currentTime;m.emit("stop",time,e);var r=l.env.stop(time);l.source.stop(r)},l}}},655:function(t,e){t.exports=function(t){var e=t.createGain(),h=e._voltage=function(t){var e=t.createBufferSource(),n=t.createBuffer(1,2,t.sampleRate);return n.getChannelData(0).set(r),e.buffer=n,e.loop=!0,e}(t),f=o(h),c=o(h),l=o(h);return e._startAmount=o(c),e._endAmount=o(l),e._multiplier=o(f),e._multiplier.connect(e),e._startAmount.connect(e),e._endAmount.connect(e),e.value=f.gain,e.startValue=c.gain,e.endValue=l.gain,e.startValue.value=0,e.endValue.value=0,Object.defineProperties(e,n),e};var n={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(t){var e=this._multiplier.gain,n=this._startAmount.gain,r=this._endAmount.gain;this._voltage.start(t),this._decayFrom=this._decayFrom=t+this.attack,this._startedAt=t;var o=this.sustain;e.cancelScheduledValues(t),n.cancelScheduledValues(t),r.cancelScheduledValues(t),r.setValueAtTime(0,t),this.attack?(e.setValueAtTime(0,t),e.linearRampToValueAtTime(1,t+this.attack),n.setValueAtTime(1,t),n.linearRampToValueAtTime(0,t+this.attack)):(e.setValueAtTime(1,t),n.setValueAtTime(0,t)),this.decay&&e.setTargetAtTime(o,this._decayFrom,h(this.decay))}},stop:{value:function(t,e){e&&(t-=this.release);var n=t+this.release;if(this.release){var r=this._multiplier.gain,o=this._startAmount.gain,f=this._endAmount.gain;r.cancelScheduledValues(t),o.cancelScheduledValues(t),f.cancelScheduledValues(t);var c=h(this.release);if(this.attack&&t<this._decayFrom){var l=function(t,e,n,r,o){var h=t+(o-n)/(r-n)*(e-t);h<=t&&(h=t);h>=e&&(h=e);return h}(0,1,this._startedAt,this._decayFrom,t);r.linearRampToValueAtTime(l,t),o.linearRampToValueAtTime(1-l,t),o.setTargetAtTime(0,t,c)}f.setTargetAtTime(1,t,c),r.setTargetAtTime(0,t,c)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(t){this._voltage.onended=t}}},r=new Float32Array([1,1]);function o(t){var e=t.context.createGain();return t.connect(e),e}function h(time){return Math.log(time+1)/Math.log(100)}},656:function(t,e){function n(t,e){return function(a,b,n,r){t(a,b,n,r),e(a,b,n,r)}}t.exports=function(t){return t.on=function(e,r){if(1===arguments.length&&"function"==typeof e)return t.on("event",e);var o="on"+e,h=t[o];return t[o]=h?n(h,r):r,t},t}},657:function(t,e,n){"use strict";var r=n(658),o=function(t){return function(t){return null!==t&&t!==[]&&t>=0&&t<129}(t)?+t:r.midi(t)};t.exports=function(t){if(t.buffers){var map=t.opts.map,e="function"==typeof map?map:o,n=function(t){return t?e(t)||t:null};t.buffers=function(t,e){return Object.keys(t).reduce((function(n,r){return n[e(r)]=t[r],n}),{})}(t.buffers,n);var r=t.start;t.start=function(t,e,o){var h=n(t),f=h%1;return f&&(h=Math.floor(h),o=Object.assign(o||{},{cents:Math.floor(100*f)})),r(h,e,o)}}return t}},658:function(t,e,n){"use strict";var r=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;var o=[0,2,4,5,7,9,11];function h(t,e,n){if("string"!=typeof t)return null;var h=r.exec(t);if(!h||!e&&h[4])return null;var p={letter:h[1].toUpperCase(),acc:h[2].replace(/x/g,"##")};return p.pc=p.letter+p.acc,p.step=(p.letter.charCodeAt(0)+3)%7,p.alt="b"===p.acc[0]?-p.acc.length:p.acc.length,p.chroma=o[p.step]+p.alt,h[3]&&(p.oct=+h[3],p.midi=p.chroma+12*(p.oct+1),p.freq=f(p.midi,n)),e&&(p.tonicOf=h[4]),p}function f(t,e){return Math.pow(2,(t-69)/12)*(e||440)}var c={parse:h,regex:function(){return r},midiToFreq:f};["letter","acc","pc","step","alt","chroma","oct","midi","freq"].forEach((function(t){c[t]=function(e){var p=h(e);return p&&void 0!==p[t]?p[t]:null}})),t.exports=c},659:function(t,e,n){"use strict";var r=Array.isArray,o={};t.exports=function(t){return t.schedule=function(time,e){var n,h,f,c,l=t.context.currentTime,d=time<l?l:time;return t.emit("schedule",d,e),e.map((function(e){return e?(r(e)?(n=e[0],h=e[1]):(n=e.time,h=e),!function(t){return t&&"object"==typeof t}(h)?(f=h,c=o):(f=h.name||h.key||h.note||h.midi||null,c=h),t.start(f,d+(n||0),c)):null}))},t}},660:function(t,e,n){var r=n(661);t.exports=function(t){return t.listenToMidi=function(input,e){var n={},o=e||{},h=o.gain||function(t){return t/127};return input.onmidimessage=function(e){var f=e.messageType?e:r(e);if("noteon"===f.messageType&&0===f.velocity&&(f.messageType="noteoff"),!o.channel||f.channel===o.channel)switch(f.messageType){case"noteon":n[f.key]=t.play(f.key,0,{gain:h(f.velocity)});break;case"noteoff":n[f.key]&&(n[f.key].stop(),delete n[f.key])}},t},t}},661:function(t,e,n){t.exports=function t(e,n,s){function a(o,i){if(!n[o]){if(!e[o]){if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var f=n[o]={exports:{}};e[o][0].call(f.exports,(function(t){var s=e[o][1][t];return a(s||t)}),f,f.exports,t,e,n,s)}return n[o].exports}for(var r=!1,o=0;o<s.length;o++)a(s[o]);return a}({1:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(t){return new function(t){if(this._event=t,this._data=t.data,this.receivedTime=t.receivedTime,this._data&&this._data.length<2)console.warn("Illegal MIDI message of length",this._data.length);else switch(this._messageCode=240&t.data[0],this.channel=15&t.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&t.data[1],this.velocity=127&t.data[2];break;case 144:this.messageType="noteon",this.key=127&t.data[1],this.velocity=127&t.data[2];break;case 160:this.messageType="keypressure",this.key=127&t.data[1],this.pressure=127&t.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&t.data[1],this.controllerValue=127&t.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=t.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&t.data[1];break;case 224:this.messageType="pitchbendchange";var e=127&t.data[2],s=127&t.data[1];this.pitchBend=(e<<8)+s}}(t)},e.exports=s.default},{}]},{},[1])(1)},662:function(t,e,n){"use strict";var r=n(663);function o(t,e){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof o))return new o(t);this.nameToUrl=e||o.nameToUrl,this.ctx=t,this.instruments={},this.promises=[]}function h(t,e){return e=e||{},function(n,time,o,h){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var f=n>0&&n<129?+n:r.midi(n),c=f?r.midiToFreq(f,440):null;if(c){o=o||.2;var l=(h=h||{}).destination||e.destination||t.destination,d=h.vcoType||e.vcoType||"sine",y=h.gain||e.gain||.4,v=t.createOscillator();v.type=d,v.frequency.value=c;var m=t.createGain();return m.gain.value=y,v.connect(m),m.connect(l),v.start(time),o>0&&v.stop(time+o),v}}}o.prototype.onready=function(t){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(t)},o.prototype.instrument=function(t,e){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var n=this.ctx;if((t=t||"default")in this.instruments)return this.instruments[t];var r={name:t,play:h(n,e)};if(this.instruments[t]=r,"default"!==t){var f=o.instrument(n,t,e).then((function(t){return r.play=t.play,r}));this.promises.push(f),r.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),f.then(t)}}else r.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),t()};return r},o.loadBuffers=function(t,e,n){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),o.instrument(t,e,n).then((function(t){return t.buffers}))},o.noteToMidi=r.midi,t.exports=o},663:function(t,e,n){"use strict";function r(s,t){return Array(t+1).join(s)}function o(t){return"number"==typeof t}function h(t,e){return Math.pow(2,(t-69)/12)*(e||440)}n.r(e),n.d(e,"regex",(function(){return c})),n.d(e,"parse",(function(){return d})),n.d(e,"build",(function(){return y})),n.d(e,"midi",(function(){return v})),n.d(e,"freq",(function(){return m})),n.d(e,"letter",(function(){return w})),n.d(e,"acc",(function(){return T})),n.d(e,"pc",(function(){return k})),n.d(e,"step",(function(){return E})),n.d(e,"alt",(function(){return S})),n.d(e,"chroma",(function(){return A})),n.d(e,"oct",(function(){return _}));var f=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function c(){return f}var l=[0,2,4,5,7,9,11];function d(t,e,n){if("string"!=typeof t)return null;var r=f.exec(t);if(!r||!e&&r[4])return null;var p={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};p.pc=p.letter+p.acc,p.step=(p.letter.charCodeAt(0)+3)%7,p.alt="b"===p.acc[0]?-p.acc.length:p.acc.length;var o=l[p.step]+p.alt;return p.chroma=o<0?12+o:o%12,r[3]&&(p.oct=+r[3],p.midi=o+12*(p.oct+1),p.freq=h(p.midi,n)),e&&(p.tonicOf=r[4]),p}function y(s,a,t){return null==s?null:s.step?y(s.step,s.alt,s.oct):s<0||s>6?null:"CDEFGAB".charAt(s)+(o(e=a)?e<0?r("b",-e):r("#",e):"")+function(t){return o(t)?""+t:""}(t);var e}function v(t){if((o(t)||"string"==typeof t)&&t>=0&&t<128)return+t;var p=d(t);return p&&function(t){return void 0!==t}(p.midi)?p.midi:null}function m(t,e){var n=v(t);return null===n?null:h(n,e)}function w(t){return(d(t)||{}).letter}function T(t){return(d(t)||{}).acc}function k(t){return(d(t)||{}).pc}function E(t){return(d(t)||{}).step}function S(t){return(d(t)||{}).alt}function A(t){return(d(t)||{}).chroma}function _(t){return(d(t)||{}).oct}}}]);