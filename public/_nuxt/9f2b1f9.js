(window.webpackJsonp=window.webpackJsonp||[]).push([[4,9,10],{525:function(t,e,r){"use strict";(function(t){var n=r(29),o=(r(41),r(32),r(40),r(175),r(84),r(551)),l=r(552),c=r.n(l);e.a={props:{value:{default:Object}},watch:{$props:{deep:!0,handler:function(t){this.props=JSON.parse(JSON.stringify(t)),this.props.value=this.valueDefault(this.props.value),this.playerInit()}}},data:function(){return{props:this.valueDefault(this.$props),lastPropsValueMidiUrl:!1,instrument:!1,soundfontLoaded:!1,player:!1,playerEvent:{},songPercent:0,editor:{zoomX:200}}},computed:{isPlaying:function(){return!!this.player&&this.player.isPlaying()},songTime:function(){return!!this.player&&this.player.getSongTime()},nextChords:function(){return[]},nextLyrics:function(){var t=this;if(!this.props.value)return[];if(!this.props.value.items)return[];if(0==this.props.value.items.length)return[];var e=this.props.value.items.filter((function(e){return e.percent>=t.songPercent&&"lyric"==e.type}));return 0==e.length&&(e=this.props.value.items.filter((function(t){return"lyric"==t.type}))).length>0&&(e=[e[e.length-1]]),e}},methods:{emitValue:function(){this.$emit("input",this.props.value)},valueDefault:function(t){var e=function(t,e){return t="object"==Object(n.a)(t)?t:{},e="object"==Object(n.a)(e)?e:{},JSON.parse(JSON.stringify(Object.assign({},t,e)))},r=e({id:!1,user_id:!1,artist_id:!1,slug:"",name:"",midi:{},items:[],user:{},chords_artist:{}},t);return r.chords_artist=e({id:!1,slug:"",name:"",cover:{}},r.chords_artist),r},playerInit:function(){var e=this;if(!this.props.value.midi||this.props.value.midi&&!this.props.value.midi.url){if(!+this.props.value.id)return;this.$axios.get("/api/chords-song/find/".concat(this.props.value.id)).then((function(t){e.props.value=t.data,e.emitValue(),e.playerInit()}))}else this.props.value.midi&&this.props.value.midi.url&&this.lastPropsValueMidiUrl!=this.props.value.midi.url&&(this.lastPropsValueMidiUrl=this.props.value.midi.url,function(){console.log("playerInit"),e.player=new o.a.Player((function(t){e.songPercent=Math.max(0,100-e.player.getSongPercentRemaining()),"Note on"==t.name&&e.instrument.play(t.noteName,AudioContext.currentTime,{gain:t.velocity/100})}));var content=e.props.value.midi.url.split(",")[1];content=t.from(content,"base64"),e.player.loadArrayBuffer(content),c.a.instrument(e.$audioContext,"marimba").then((function(t){e.instrument=t}))}())},play:function(){this.isPlaying?this.pause():this.player.play()},pause:function(){this.player.pause()},stop:function(){this.player.stop(),this.songPercent=Math.max(0,100-this.player.getSongPercentRemaining())},skipToPercent:function(t){var e=this,r=this.player.isPlaying();r&&this.player.stop(),setTimeout((function(){e.player.skipToPercent(t),r&&e.player.play(),e.songPercent=Math.max(0,100-e.player.getSongPercentRemaining())}),10)}},mounted:function(){this.playerInit()}}}).call(this,r(550).Buffer)},533:function(t,e,r){var content=r(542);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(56).default)("1ef8fdc1",content,!0,{sourceMap:!1})},541:function(t,e,r){"use strict";r(533)},542:function(t,e,r){(e=t.exports=r(55)(!1)).push([t.i,"._2boqgtdKNRgGLjYuLhoXMw{min-height:400px;background-image:linear-gradient(90deg,transparent 50%,#eee 0);background-size:5% 50%}",""]),e.locals={"midiplayer-editor-pattern":"_2boqgtdKNRgGLjYuLhoXMw"}},546:function(t,e,r){"use strict";r.r(e);var n=r(525).a,o=(r(541),r(18)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"bg-light shadow-sm"},[r("div",{staticClass:"p-2"},[t.props.value.link?r("h3",{staticClass:"m-0"},[r("nuxt-link",{attrs:{to:t.props.value.link.profile}},[t._v("\r\n                    "+t._s(t.props.value.name)+"\r\n                ")])],1):t._e(),t._v(" "),t.props.value.chords_artist&&t.props.value.chords_artist.link?r("h5",{staticClass:"m-0"},[r("nuxt-link",{attrs:{to:t.props.value.chords_artist.link.profile}},[t._v("\r\n                    "+t._s(t.props.value.chords_artist.name)+"\r\n                ")])],1):t._e()]),t._v(" "),t.props.value.midi&&t.props.value.midi.url?r("div",[r("div",{staticClass:"text-center",staticStyle:{height:"50px",overflow:"hidden"}},t._l(t.nextLyrics,(function(e){return r("div",[t._v(t._s(e.value))])})),0),t._v(" "),r("div",{staticClass:"d-flex align-items-center p-2"},[t.isPlaying?t._e():r("div",{staticClass:"pr-1"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.play()}}},[r("i",{staticClass:"fas fa-play"})])]),t._v(" "),t.isPlaying?r("div",{staticClass:"pr-1"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.pause()}}},[r("i",{staticClass:"fas fa-pause"})])]):t._e(),t._v(" "),r("div",{staticClass:"pr-1"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.stop()}}},[r("i",{staticClass:"fas fa-stop"})])]),t._v(" "),r("div",{staticClass:"flex-grow-1 pl-3"},[r("el-slider",{on:{change:function(e){return t.skipToPercent(e)}},model:{value:t.songPercent,callback:function(e){t.songPercent=e},expression:"songPercent"}})],1)])]):t._e()])])}),[],!1,null,null,null);e.default=component.exports},559:function(t,e,r){var content=r(602);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(56).default)("7dd5a32f",content,!0,{sourceMap:!1})},575:function(t,e,r){"use strict";(function(t){r(50),r(26),r(41),r(70),r(33),r(71);var n=r(30),o=r(29),l=(r(40),r(49),r(8),r(88),r(576),r(577),r(578),r(579),r(580),r(581),r(582),r(583),r(584),r(585),r(586),r(587),r(588),r(589),r(590),r(591),r(592),r(593),r(594),r(595),r(596),r(597),r(598),r(599),r(600),r(382),r(32),r(175),r(84),r(551)),c=r(552),d=r.n(c);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}e.a={props:{value:{default:Object}},watch:{$props:{deep:!0,handler:function(t){this.props=JSON.parse(JSON.stringify(t)),this.props.value=this.valueDefault(this.props.value),this.playerInit()}}},data:function(){return{props:this.valueDefault(this.$props),lastPropsValueMidiUrl:!1,instrument:!1,soundfontLoaded:!1,player:!1,playerEvent:{},songPercent:0,editor:{zoomX:200}}},computed:{isPlaying:function(){return!!this.player&&this.player.isPlaying()},songTime:function(){return!!this.player&&this.player.getSongTime()},nextChords:function(){return[]},nextLyrics:function(){return[]}},methods:{emitValue:function(){this.$emit("input",this.props.value)},valueDefault:function(t){var e=function(t,e){return t="object"==Object(o.a)(t)?t:{},e="object"==Object(o.a)(e)?e:{},JSON.parse(JSON.stringify(Object.assign({},t,e)))},r=e({id:!1,user_id:!1,artist_id:!1,slug:"",name:"",midi:{},items:[],user:{},chords_artist:{}},t);return r.chords_artist=e({id:!1,slug:"",name:"",cover:{}},r.chords_artist),r},uuid:function(){return([1e5]+0).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},itemAdd:function(t){t=JSON.parse(JSON.stringify(t||{})),t=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({id:this.uuid(),percent:0,type:"lyric",value:""},t),this.props.value.items.push(t)},itemRemove:function(t){var e=this.props.value.items.indexOf(t);this.props.value.items.splice(e,1),this.emitValue()},playerInit:function(){var e=this;if(!this.props.value.midi||this.props.value.midi&&!this.props.value.midi.url){if(!+this.props.value.id)return;this.$axios.get("/api/chords-song/find/".concat(this.props.value.id)).then((function(t){e.props.value=t.data,e.emitValue(),e.playerInit()}))}else this.props.value.midi&&this.props.value.midi.url&&this.lastPropsValueMidiUrl!=this.props.value.midi.url&&(this.lastPropsValueMidiUrl=this.props.value.midi.url,function(){console.log("playerInit"),e.player=new l.a.Player((function(t){e.songPercent=Math.max(0,100-e.player.getSongPercentRemaining()),"Note on"==t.name&&e.instrument.play(t.noteName,AudioContext.currentTime,{gain:t.velocity/100})}));var content=e.props.value.midi.url.split(",")[1];content=t.from(content,"base64"),e.player.loadArrayBuffer(content),d.a.instrument(e.$audioContext,"marimba").then((function(t){e.instrument=t}))}())},play:function(){this.isPlaying?this.pause():this.player.play()},pause:function(){this.player.pause()},stop:function(){this.player.stop(),this.songPercent=Math.max(0,100-this.player.getSongPercentRemaining())},skipToPercent:function(t){var e=this,r=this.player.isPlaying();r&&this.player.stop(),setTimeout((function(){e.player.skipToPercent(t),r&&e.player.play(),e.songPercent=Math.max(0,100-e.player.getSongPercentRemaining())}),10)}},mounted:function(){this.playerInit()}}}).call(this,r(550).Buffer)},601:function(t,e,r){"use strict";r(559)},602:function(t,e,r){(e=t.exports=r(55)(!1)).push([t.i,"._3Q7NE-YQVhIfgPEaAp93sS{fill:#eee;stroke-width:1;stroke:#ddd}",""]),e.locals={"midiplayer-editor-items-track":"_3Q7NE-YQVhIfgPEaAp93sS"}},610:function(t,e,r){var content=r(658);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(56).default)("3ebb7449",content,!0,{sourceMap:!1})},626:function(t,e,r){"use strict";r.r(e);var n={props:{songPercent:{default:0}},watch:{$props:{deep:!0,handler:function(t){this.props=JSON.parse(JSON.stringify(t))}}},data:function(){return{props:JSON.parse(JSON.stringify(this.$props)),zoomX:100,itemNew:{percent:0,type:!1,value:""},itemEdit:!1,drag:!1,selectArea:{show:!1,bind:{x:0,y:0,width:50,height:50}},itemTypes:[{type:"chord",y:0,label:"Acordes"},{type:"lyric",y:20,label:"Letras"}]}},methods:{getMousePercent:function(t){var rect=this.$refs.referenceArea.getBoundingClientRect();return{x:100*t.layerX/rect.width,y:100*t.layerY/rect.height}},mousemoveHandler:function(t){var e=this.getMousePercent(t),r=e.x;e.y;this.itemNew.percent=r,this.drag&&1==t.buttons&&(this.drag.percent=r)},itemAddHandle:function(t,e){var r=this.getMousePercent(t),n=r.x;r.y;this.itemAdd({percent:n,type:e.type,value:""})},itemAdd:function(t){this.itemEdit=t,this.$parent.itemAdd(this.itemEdit)},itemRemove:function(t){this.$parent.itemRemove(t),this.itemEdit=!1}}},o=(r(601),r(18)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.$parent.props.value&&t.$parent.props.value.items?r("div",[r("div",{staticStyle:{position:"relative","overflow-x":"scroll"},on:{mousemove:function(e){return t.mousemoveHandler(e)},wheel:function(e){e.preventDefault(),t.zoomX+=-1*e.deltaY/10}}},[r("svg",{ref:"referenceArea",attrs:{width:t.zoomX+"%",height:"40px"}},[t._l(t.itemTypes,(function(i){return r("g",{attrs:{transform:"translate(0, "+i.y+") rotate(0)"},on:{mousemove:function(e){t.itemNew.type=i.type}}},[r("rect",{staticClass:"midiplayer-editor-items-track",attrs:{x:"0",y:"0",width:"100%",height:"20"},on:{click:function(e){return t.itemAddHandle(e,i)}}}),t._v(" "),t._l(t.$parent.props.value.items,(function(e){return e.type==i.type?r("circle",{staticStyle:{fill:"#ddd","stroke-width":"1",stroke:"#ccc",cursor:"pointer"},attrs:{cx:e.percent+"%",cy:"10",r:"8",title:i.type},on:{click:function(r){t.itemEdit=e},mousedown:function(r){t.drag=e},mouseup:function(e){t.drag=!1}}}):t._e()}))],2)})),t._v(" "),r("line",{staticStyle:{stroke:"#f00","stroke-width":"1"},attrs:{x1:t.props.songPercent+"%",y1:"0",x2:t.props.songPercent+"%",y2:"100%"}})],2)]),t._v(" "),r("div",[t.itemEdit?r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.itemEdit.value,expression:"itemEdit.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.itemEdit.value},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.itemEdit=!1},input:function(e){e.target.composing||t.$set(t.itemEdit,"value",e.target.value)}}}),t._v(" "),r("div",{staticClass:"input-group-append"},[r("div",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.itemEdit=!1}}},[t._v("Ok")])])]),t._v(" "),r("div",{staticClass:"input-group-append"},[r("div",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.itemRemove(t.itemEdit)}}},[r("i",{staticClass:"fas fa-fw fa-times"})])])])]):r("div",[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.itemAdd({percent:t.songPercent,type:t.itemNew.type,value:""})}}},[t._v("\n                Adicionar marcador agora\n            ")])])])]):t._e()}),[],!1,null,null,null);e.default=component.exports},657:function(t,e,r){"use strict";r(610)},658:function(t,e,r){(e=t.exports=r(55)(!1)).push([t.i,"._1KD9uMsrQ13u5YdLPXeLHD{min-height:400px;background-image:linear-gradient(90deg,transparent 50%,#eee 0);background-size:5% 50%}",""]),e.locals={"midiplayer-editor-pattern":"_1KD9uMsrQ13u5YdLPXeLHD"}},695:function(t,e,r){"use strict";r.r(e);var n=r(575).a,o=(r(657),r(18)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("a",{staticClass:"btn btn-block btn-dark",attrs:{href:""}},[t._v("refresh")]),t._v(" "),r("midiplayer-editor-items",{attrs:{"song-percent":t.$refs.midiplayer?t.$refs.midiplayer.songPercent:0},on:{change:function(e){return t.emitValue()}},model:{value:t.props.value,callback:function(e){t.$set(t.props,"value",e)},expression:"props.value"}}),t._v(" "),r("midiplayer",{ref:"midiplayer",attrs:{value:t.props.value}}),t._v(" "),t.props.value.items?r("pre",[t._v(t._s(t.props.value.items))]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{MidiplayerEditorItems:r(626).default,Midiplayer:r(546).default})}}]);